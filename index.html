<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>minikube-webserver Dokumentation</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="navbar navbar-dark bg-dark fixed-top navbar-expand-lg">
<div class="container">
<a class="navbar-brand">minikube-webserver</a>
<ul class="navbar-nav ms-auto">
<li class="nav-item"><a class="nav-link" href="#arch">Architektur</a></li>
<li class="nav-item"><a class="nav-link" href="#setup">Setup</a></li>
<li class="nav-item"><a class="nav-link" href="#deploy">Deployment</a></li>
<li class="nav-item"><a class="nav-link" href="#security">Sicherheit</a></li>
</ul>
</div>
</nav>

<header class="text-center section">
<h1 class="display-4">minikube-webserver</h1>
<p class="lead">Lokale Kubernetes Infrastruktur mit HTTPS & Failover</p>
</header>

<section id="arch" class="section">
<div class="container">
<h2>Interaktive Architektur</h2>

<div class="row g-4">
<div class="col-lg-8">
<div class="card-ui">

<svg width="100%" height="600">

<g class="node"><rect x="260" y="20" width="200" height="60" rx="14" fill="#2563eb"/>
<text x="360" y="55" text-anchor="middle" fill="white">Browser HTTPS</text></g>

<line class="arrow" x1="360" y1="80" x2="360" y2="130"/>

<g class="node"><rect x="260" y="130" width="200" height="60" rx="14" fill="#7c3aed"/>
<text x="360" y="165" text-anchor="middle" fill="white">NodePort 30443</text></g>

<line class="arrow" x1="360" y1="190" x2="360" y2="240"/>

<g class="node"><rect x="260" y="240" width="200" height="60" rx="14" fill="#dc2626"/>
<text x="360" y="275" text-anchor="middle" fill="white">HAProxy LB</text></g>

<line class="arrow" x1="360" y1="300" x2="360" y2="350"/>

<g class="node"><rect x="260" y="350" width="200" height="60" rx="14" fill="#16a34a"/>
<text x="360" y="385" text-anchor="middle" fill="white">Headless Service</text></g>

<line class="arrow" x1="360" y1="410" x2="360" y2="460"/>

<g id="pods"></g>

</svg>

</div>
</div>

<div class="col-lg-4">
<div class="card-ui">
<h4>Cluster Simulation</h4>
Pods: <span id="podCount">3</span><br><br>
<button class="btn btn-success w-100 mb-2" onclick="scaleUp()">Pods +1</button>
<button class="btn btn-danger w-100" onclick="scaleDown()">Pods -1</button>
</div>
</div>
</div>
</div>
</section>

<section id="setup" class="section">
<div class="container">
<h2>Schritt 1 – Voraussetzungen</h2>
<pre>
docker --version
minikube version
kubectl version --client
</pre>

<h2 class="mt-5">Schritt 2 – Minikube starten</h2>
<pre>minikube start --driver=docker</pre>

<h2 class="mt-5">Schritt 3 – Zertifikat erzeugen</h2>
<pre>
openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365 -nodes
cat cert.pem key.pem > fullchain.pem
</pre>
</div>
</section>

<section id="deploy" class="section">
<div class="container">
<h2>Deployment</h2>

<h4>Images bauen</h4>
<pre>
docker build -t webserver ./app
docker build -t haproxy-lb ./haproxy
</pre>

<h4>Kubernetes deployen</h4>
<pre>
kubectl apply -f k8s/
kubectl get pods
kubectl get svc
</pre>

<h4>Zugriff</h4>
<pre>https://&lt;MINIKUBE-IP&gt;:30443</pre>
</div>
</section>

<section id="security" class="section">
<div class="container">
<h2>Sicherheitsaspekte</h2>
<ul>
<li>Minimales Container-Image</li>
<li>Healthchecks aktiv</li>
<li>Keine Secrets im Repo</li>
<li>Self-signed TLS lokal</li>
<li>Failover abgesichert</li>
</ul>
</div>
</section>

<footer class="text-center p-4 bg-dark">
Autor: Fausto Oliveira
</footer>

<script src="script.js"></script>

</body>
</html>